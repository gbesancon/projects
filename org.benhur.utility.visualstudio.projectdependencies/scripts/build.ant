<project name="org.benhur.utility.visualstudio.projectdependencies" default="dist.zip" basedir=".">

	<property name="visualstudio.dir" value="../.."/>
	<property name="org.benhur.utility.visualstudio.projectdependencies.dir" value="${visualstudio.dir}/org.benhur.utility.visualstudio.projectdependencies"/>
	<property name="dist.dir" value="${org.benhur.utility.visualstudio.projectdependencies.dir}/dist"/>
	<property name="tmp.dist.dir" value="${dist.dir}/tmp"/>

	<property name="eclipse-utility.dir" value="${visualstudio.dir}/../eclipse-utility"/>

	<target name="clean.dist">
		<delete dir="${dist.dir}" />
	</target>

	<target name="dist">
		<mkdir dir="${tmp.dist.dir}" />
		<ant antfile="${eclipse-utility.dir}/org.benhur.utility/scripts/build.ant" target="dist">
			<property name="org.benhur.utility.dir" value="${eclipse-utility.dir}/org.benhur.utility"/>
		</ant>
		<jar destfile="${tmp.dist.dir}/org.benhur.utility.visualstudio.projectdependencies.jar">
			<fileset dir="${org.benhur.utility.visualstudio.projectdependencies.dir}/bin" includes="**/*.class" />
			<manifest>
				<attribute name="Class-Path" value="./org.benhur.utility.jar" />
			</manifest>
		</jar>
	</target>

	<target name="dist.zip" depends="clean.dist, dist">
		<zip destfile="${dist.dir}/org.benhur.utility.visualstudio.projectdependencies.zip">
			<fileset dir="${tmp.dist.dir}" includes="**/*" />
		</zip>
		<delete dir="${tmp.dist.dir}" />
	</target>
</project>
